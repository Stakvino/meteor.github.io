"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function round(number){var integer=parseInt(number);var fractional=Number((number-integer).toFixed(2));if(fractional<.35){return integer}else if(fractional>=.35&&fractional<=.65){return integer+.5}else{return integer+1}}function throttled(delay,fn){var lastCall=0;return function(){var now=(new Date).getTime();if(now-lastCall<delay){return}lastCall=now;return fn.apply(undefined,arguments)}}function rgbToHsl(array){if(array[0]===array[1]&&array[1]===array[2]){var _Lightness=Math.round(array[0]*100/255);return[0,0,_Lightness]}var norml=array.map(function(e){return e/255});var red=norml[0];var green=norml[1];var blue=norml[2];var min=Math.min.apply(Math,_toConsumableArray(norml));var max=Math.max.apply(Math,_toConsumableArray(norml));var delta=max-min;var hue=0;if(red===max){hue=(green-blue)/delta;hue%=6}else if(green===max){hue=2+(blue-red)/delta}else if(blue===max){hue=4+(red-green)/delta}var Lightness=(min+max)/2;var saturation=0;if(delta!==0){saturation=delta/(1-Math.abs(2*Lightness-1))}hue=Math.round(hue*60);if(hue<0){hue=360+hue}saturation=round(saturation*100);Lightness=round(Lightness*100);return[hue,saturation,Lightness]}function rgbToHex(array){return array.map(function(e){var hex=e.toString(16);if(hex.length===1){hex="0"+hex}return hex})}function hslToRgb(array){var hue=array[0];var saturation=array[1]/100;var lightness=array[2]/100;var C=(1-Math.abs(2*lightness-1))*saturation;var X=C*(1-Math.abs(hue/60%2-1));var m=lightness-C/2;var red=null;var green=null;var blue=null;if(hue>=0&&hue<60){red=C;green=X;blue=0}else if(hue>=60&&hue<120){red=X;green=C;blue=0}else if(hue>=120&&hue<180){red=0;green=C;blue=X}else if(hue>=180&&hue<240){red=0;green=X;blue=C}else if(hue>=240&&hue<300){red=X;green=0;blue=C}else if(hue>=300&&hue<360){red=C;green=0;blue=X}var _ref=[(red+m)*255,(green+m)*255,(blue+m)*255];red=_ref[0];green=_ref[1];blue=_ref[2];var _map=[red,green,blue].map(function(e){return Math.round(e)});var _map2=_slicedToArray(_map,3);red=_map2[0];green=_map2[1];blue=_map2[2];return[red,green,blue]}function hslToHex(array){return rgbToHex(hslToRgb(array))}function hexToRgb(array){return array.map(function(e){return parseInt(e,16)})}function hexToHsl(array){return rgbToHsl(hexToRgb(array))}var ColorPicker=function(){function ColorPicker(){_classCallCheck(this,ColorPicker);this.DOM=this.create();this.closeButton=this.DOM.querySelector("button.close-but");this.cancelButton=this.DOM.querySelector("button.cancel-but");this.selectButton=this.DOM.querySelector("button.select-but");this.hueCanvas=this.DOM.querySelector("canvas.hue-canvas");this.hueSliderBut=this.DOM.querySelector("div.hue-slider-button");this.opacityCanvas=this.DOM.querySelector("canvas.opacity-canvas");this.opacitySliderBut=this.DOM.querySelector("div.opacity-slider-button");this.slCanvas=this.DOM.querySelector("canvas.sl-canvas");this.slCursor=this.DOM.querySelector("div.sl-cursor");this.slCtx=this.slCanvas.getContext("2d");this.lastSelectedColorSquare=this.DOM.querySelector("div.last-selected-color");this.selectedColorSquare=this.DOM.querySelector("div.selected-color");this.colorCodeInput=this.DOM.querySelector("input.color-code");this.lastSelectedColor="hsla(360, 100%, 100%, 1)";this.selectedColor={hsla:{str:"hsla(360, 100%, 100%, 1)",array:[360,100,100,1]},rgba:{str:"rgba(255, 255, 255, 1)",array:[255,255,255,1]},hex:{str:"#ffffff",array:["ff","ff","ff"]}};this.selectedColorCode="hex";this.selectedHue=360;this.selectedSaturation=100;this.selectedLightness=100;this.selectedOpacity=1;this.inputCallbacks=[];this.changeCallbacks=[];this.init();this.AttachEventHandlers()}_createClass(ColorPicker,[{key:"selectedHex",get:function get(){return this.selectedColor.hex.str}},{key:"selectedRgba",get:function get(){return this.selectedColor.rgba.str}},{key:"selectedHsla",get:function get(){return this.selectedColor.hsla.str}},{key:"halfSliderSize",get:function get(){return this.hueSliderBut.clientWidth/2}},{key:"halfSlCursorSize",get:function get(){return this.slCursor.clientWidth/2}}]);return ColorPicker}();ColorPicker.prototype.create=function(){var colorPicker=document.createElement("div");colorPicker.className="color-picker-js hide";colorPicker.innerHTML='\n  <div class="close-block">\n  <button type="button" class="close-but">&#x2715;</button>\n  </div>\n  <div class="main-block">\n    <div class="hue-block">\n     <canvas width="360" height="20" class="hue-canvas"></canvas>\n     <div class="slider-button hue-slider-button"></div>\n    </div>\n    <div class="selected-colors-block">\n      <div class="last-selected-color"></div>\n      <div class="selected-color"></div>\n    </div>\n    <div class="sl-block">\n     <canvas width="200" height="200" class="sl-canvas"></canvas>\n     <div class="sl-cursor"></div>\n    </div>\n    <div class="opacity-block">\n      <canvas width="20" height="200" class="opacity-canvas transparent-background"></canvas>\n      <div class="slider-button opacity-slider-button"></div>\n    </div>\n    <input type="text" spellcheck="false" class="color-code letter-spacing">\n    <div class="conversion-buttons">\n      <button type="button" class="selected-color-code" data-code="hex">HEX</button>\n      <button type="button" data-code="hsla">HSLA</button>\n      <button type="button" data-code="rgba">RGBA</button>\n    </div>\n    <div class="cancel-select">\n      <button type="button" class="cancel-but">Cancel</button>\n      <button type="button" class="select-but">Select</button>\n    </div>\n  </div>';return colorPicker};ColorPicker.prototype.init=function(){var hueCtx=this.hueCanvas.getContext("2d");var hueCanvasWidth=this.hueCanvas.width;var hueCanvasHeight=this.hueCanvas.height;for(var i=0;i<=hueCanvasWidth;i++){hueCtx.fillStyle="hsl("+i+",100%,50%)";hueCtx.fillRect(i,0,1,hueCanvasHeight)}var opacityCtx=this.opacityCanvas.getContext("2d");var opacityCanvasWidth=this.opacityCanvas.width;var opacityCanvasHeight=this.opacityCanvas.height;for(var _i=0;_i<=opacityCanvasHeight;_i++){opacityCtx.fillStyle="rgba(0,0,0,"+_i/opacityCanvasHeight+")";opacityCtx.fillRect(0,_i,opacityCanvasWidth,2)}this.fillLastSelectedColorSquare();this.colorCodeInput.value=this.selectedColor.hex.str;this.fillSlSquare();this.fillSelectedColorSquare();document.body.appendChild(this.DOM);var left=innerWidth/2-250;this.DOM.style.left=left+"px"};var throttled_delay=60;ColorPicker.prototype.AttachEventHandlers=function(){var _this=this;this.closeButton.addEventListener("click",function(){_this.hide()});this.cancelButton.addEventListener("click",function(){_this.hide()});this.selectButton.addEventListener("click",function(){if(_this.selectedColor.hsla.str!==_this.lastSelectedColor){_this.lastSelectedColor=_this.selectedColor.hsla.str;_this.fillLastSelectedColorSquare();var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this.changeCallbacks[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var callback=_step.value;callback()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}_this.hide()});var mouseLastPosition={x:null,y:null};var mainBlockClicked=false;var closeBlock=this.DOM.querySelector("div.close-block");var mainBlock=this.DOM.querySelector("div.main-block");this.DOM.addEventListener("mousedown",function(e){if(e.target===closeBlock||e.target===mainBlock){e.preventDefault();mouseLastPosition.x=null;mouseLastPosition.y=null;mainBlockClicked=true}});addEventListener("mouseup",function(){return mainBlockClicked=false});addEventListener("mousemove",throttled(throttled_delay,function(e){if(mainBlockClicked){var distanceMoved={x:e.pageX-(mouseLastPosition.x||e.pageX),y:e.pageY-(mouseLastPosition.y||e.pageY)};_this.DOM.style.left=_this.DOM.offsetLeft+distanceMoved.x+"px";_this.DOM.style.top=_this.DOM.offsetTop+distanceMoved.y+"px";mouseLastPosition.x=e.pageX;mouseLastPosition.y=e.pageY}}));var hueSliderClicked=false;this.hueSliderBut.addEventListener("mousedown",function(e){e.preventDefault();hueSliderClicked=true});addEventListener("mouseup",function(){return hueSliderClicked=false});addEventListener("mousemove",throttled(throttled_delay,function(e){if(hueSliderClicked){var hueCanvasPosition=_this.hueCanvas.getClientRects()[0].left;var newHueValue=e.pageX-hueCanvasPosition-window.scrollX;var colorArray=[newHueValue,_this.selectedSaturation,_this.selectedLightness,_this.selectedOpacity];_this.changeState("hsla",colorArray);_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_this.inputCallbacks[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var callback=_step2.value;callback()}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}));this.hueCanvas.addEventListener("mousedown",function(e){e.preventDefault();hueSliderClicked=true;var hueCanvasPosition=_this.hueCanvas.getClientRects()[0].x;var newHueValue=e.pageX-hueCanvasPosition-window.scrollX;var colorArray=[newHueValue,_this.selectedSaturation,_this.selectedLightness,_this.selectedOpacity];_this.changeState("hsla",colorArray);_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=_this.inputCallbacks[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var callback=_step3.value;callback()}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}});var opacitySliderClicked=false;this.opacitySliderBut.addEventListener("mousedown",function(e){e.preventDefault();opacitySliderClicked=true});addEventListener("mouseup",function(){return opacitySliderClicked=false});addEventListener("mousemove",throttled(throttled_delay,function(e){if(opacitySliderClicked){var newOpacityValue=(e.pageY-_this.opacityCanvas.getClientRects()[0].top-window.scrollY)/200;_this.moveOpacitySlider(newOpacityValue);var colorArray=[_this.selectedHue,_this.selectedSaturation,_this.selectedLightness,newOpacityValue];_this.changeState("hsla",colorArray);_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=_this.inputCallbacks[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var callback=_step4.value;callback()}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}}));this.opacityCanvas.addEventListener("mousedown",function(e){e.preventDefault();opacitySliderClicked=true;var newOpacityValue=(e.pageY-_this.opacityCanvas.getClientRects()[0].top-window.scrollY)/200;var colorArray=[_this.selectedHue,_this.selectedSaturation,_this.selectedLightness,newOpacityValue];_this.changeState("hsla",colorArray);_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=_this.inputCallbacks[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var callback=_step5.value;callback()}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}});var slCursorClicked=false;this.slCursor.addEventListener("mousedown",function(){return slCursorClicked=true});addEventListener("mouseup",function(){return slCursorClicked=false});this.slCanvas.addEventListener("mousedown",function(e){e.preventDefault();slCursorClicked=true;var slCanvasClientRect=_this.slCanvas.getClientRects()[0];var saturation=(e.pageX-slCanvasClientRect.x-window.scrollX)/2;var lightness=100-(e.pageY-slCanvasClientRect.y-window.scrollY)/2;var colorArray=[_this.selectedHue,saturation,lightness,_this.selectedOpacity];_this.changeState("hsla",colorArray);_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=_this.inputCallbacks[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var callback=_step6.value;callback()}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}});addEventListener("mousemove",throttled(throttled_delay,function(e){if(slCursorClicked){var slCanvasClientRect=_this.slCanvas.getClientRects()[0];var saturation=(e.pageX-slCanvasClientRect.x-window.scrollX)/2;var lightness=100-(e.pageY-slCanvasClientRect.y-window.scrollY)/2;var colorArray=[_this.selectedHue,saturation,lightness,_this.selectedOpacity];_this.changeState("hsla",colorArray);_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=_this.inputCallbacks[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var callback=_step7.value;callback()}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}}));this.colorCodeInput.addEventListener("input",function(){var colorArray=[];if(_this.selectedColorCode==="hex"){colorArray=_this.getColorFromHex()}else if(_this.selectedColorCode==="hsla"){colorArray=_this.getColorFromHsla()}else if(_this.selectedColorCode==="rgba"){colorArray=_this.getColorFromRgba()}_this.changeState(_this.selectedColorCode,colorArray)});this.colorCodeInput.addEventListener("keydown",function(e){if(e.key==="Enter"){_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str}});var conversionButtons=Array.from(this.DOM.querySelector("div.conversion-buttons").children);var _loop=function _loop(i){var currentSelected=conversionButtons[i];currentSelected.addEventListener("click",function(){var prevSelected=conversionButtons.filter(function(but){return but.classList.contains("selected-color-code")})[0];prevSelected.classList.remove("selected-color-code");currentSelected.classList.add("selected-color-code");_this.selectedColorCode=currentSelected.dataset.code;_this.colorCodeInput.value=_this.selectedColor[_this.selectedColorCode].str;if(_this.selectedColorCode==="hex"){_this.colorCodeInput.classList.add("letter-spacing")}else{_this.colorCodeInput.classList.remove("letter-spacing")}})};for(var i=0;i<conversionButtons.length;i++){_loop(i)}};ColorPicker.prototype.onInput=function(callback){this.inputCallbacks.push(callback)};ColorPicker.prototype.removeOnInput=function(callback){this.inputCallbacks.splice(this.inputCallbacks.indexOf(callback),1)};ColorPicker.prototype.onChange=function(callback){this.changeCallbacks.push(callback)};ColorPicker.prototype.removeOnChange=function(callback){this.changeCallbacks.splice(this.changeCallbacks.indexOf(callback),1)};ColorPicker.prototype.onSelect=function(callback){this.selectButton.addEventListener("click",callback)};ColorPicker.prototype.removeOnSelect=function(callback){this.selectButton.removeEventListener("click",callback)};ColorPicker.prototype.onCancel=function(callback){this.cancelButton.addEventListener("click",callback)};ColorPicker.prototype.removeOnCancel=function(callback){this.cancelButton.removeEventListener("click",callback)};ColorPicker.prototype.onClose=function(callback){this.closeButton.addEventListener("click",callback)};ColorPicker.prototype.removeOnClose=function(callback){this.closeButton.removeEventListener("click",callback)};ColorPicker.prototype.getColorFromHex=function(){var value=this.colorCodeInput.value;var colorsCodeArray=value.match(/[0-9a-fA-F]/g);if(!colorsCodeArray||colorsCodeArray.length!==3&&colorsCodeArray.length!==6){return}else if(colorsCodeArray.length===6){for(var i=0;i<colorsCodeArray.length/2;i++){colorsCodeArray[i]=colorsCodeArray[i*2]+colorsCodeArray[2*i+1]}colorsCodeArray=colorsCodeArray.splice(0,3)}else if(colorsCodeArray.length===3){colorsCodeArray=colorsCodeArray.map(function(e){return e.repeat(2)})}return colorsCodeArray};ColorPicker.prototype.getColorFromHsla=function(){var value=this.colorCodeInput.value;var colorsCodeArray=[];for(var i=0;i<4;i++){var match=value.match(/\d/);if(match){var digitIndex=match.index;value=value.slice(digitIndex);colorsCodeArray.push(parseFloat(value));value=value.slice(colorsCodeArray[i].toString().length)}}var hue=Math.round(colorsCodeArray[0]||0);var saturation=round(colorsCodeArray[1]||0);var lightness=round(colorsCodeArray[2]||0);var opacity=colorsCodeArray[3];if(hue>360){hue=hue%360}if(saturation>100){saturation=100}if(lightness>100){lightness=100}if(opacity===undefined){opacity=1}else if(opacity<0){opacity=0}else if(opacity>1){opacity=(opacity/Math.pow(10,opacity.toString().length)).toPrecision(2);opacity=Number(opacity)}return[hue,saturation,lightness,opacity]};ColorPicker.prototype.getColorFromRgba=function(){var value=this.colorCodeInput.value;var colorsCodeArray=[];for(var i=0;i<4;i++){var match=value.match(/\d/);if(match){var digitIndex=match.index;value=value.slice(digitIndex);colorsCodeArray.push(parseFloat(value));value=value.slice(colorsCodeArray[i].toString().length)}}var red=colorsCodeArray[0]||0;var green=colorsCodeArray[1]||0;var blue=colorsCodeArray[2]||0;var opacity=colorsCodeArray[3];if(red>255){red=255}if(green>255){green=100}if(blue>255){blue=255}if(opacity===undefined){opacity=1}else if(opacity<0){opacity=0}else if(opacity>1){opacity=(opacity/Math.pow(10,opacity.toString().length)).toPrecision(2);opacity=Number(opacity)}return[red,green,blue,opacity]};ColorPicker.prototype.fillSlSquare=function(){if(this.selectedOpacity===0){this.slCanvas.classList.add("transparent-background")}else{this.slCanvas.classList.remove("transparent-background")}var pixelSize=2;this.slCtx.clearRect(0,0,this.slCanvas.width,this.slCanvas.height);for(var i=0;i<=100;i++){for(var j=0;j<=100;j++){var saturation=j;var lightness=i;this.slCtx.fillStyle="hsla("+this.selectedHue+","+saturation+"%,"+lightness+"%,"+this.selectedOpacity+")";var x=j*pixelSize;var y=(100-i)*pixelSize;this.slCtx.fillRect(x,y,pixelSize,pixelSize)}}};ColorPicker.prototype.fillLastSelectedColorSquare=function(){if(this.selectedOpacity===0){this.lastSelectedColorSquare.classList.add("transparent-background")}else{this.lastSelectedColorSquare.classList.remove("transparent-background")}this.lastSelectedColorSquare.style.backgroundColor=this.lastSelectedColor};ColorPicker.prototype.fillSelectedColorSquare=function(){if(this.selectedOpacity===0){this.selectedColorSquare.classList.add("transparent-background")}else{this.selectedColorSquare.classList.remove("transparent-background")}this.selectedColorSquare.style.backgroundColor=this.selectedColor.hsla.str};ColorPicker.prototype.changeState=function(colorCode,colorArray){if(colorArray===undefined){return}colorArray=colorArray.map(function(e){if(e<0){return 0}else{return e}});var _colorArray=colorArray,_colorArray2=_slicedToArray(_colorArray,4),hue=_colorArray2[0],saturation=_colorArray2[1],lightness=_colorArray2[2],opacity=_colorArray2[3];if(hue>360){hue=360}if(saturation>100){saturation=100}if(lightness>100){lightness=100}if(opacity>1){opacity=1}colorArray=[hue,saturation,lightness,opacity];var hslArray=colorArray.slice(0,3);var hexArray=hslToHex(hslArray);var rgbArray=hslToRgb(hslArray);this.selectedColor.hsla.str="hsla("+hue+", "+saturation+"%, "+lightness+"%, "+opacity+")";this.selectedColor.hsla.array=[hue,saturation,lightness,opacity];var _rgbArray=_slicedToArray(rgbArray,3),red=_rgbArray[0],green=_rgbArray[1],blue=_rgbArray[2];this.selectedColor.rgba.str="rgba("+red+", "+green+", "+blue+", "+opacity+")";this.selectedColor.rgba.array=[red,green,blue,opacity];this.selectedColor.hex.array=hexArray.slice();this.selectedColor.hex.str="#"+this.selectedColor.hex.array.join("");this.moveHueSlider(hue);this.moveSlCursor(saturation,lightness);this.moveOpacitySlider(opacity);this.fillSlSquare();this.fillSelectedColorSquare()};ColorPicker.prototype.show=function(){this.DOM.classList.remove("hide")};ColorPicker.prototype.hide=function(){this.DOM.classList.add("hide")};ColorPicker.prototype.moveHueSlider=function(hue){if(hue<0){hue=0}else if(hue>360){hue=360}this.selectedHue=Math.round(hue);var leftPosition=this.selectedHue-this.halfSliderSize;this.hueSliderBut.style.left=leftPosition+"px"};ColorPicker.prototype.moveOpacitySlider=function(opacity){if(opacity<0){opacity=0}else if(opacity>1){opacity=1}this.selectedOpacity=Number(opacity.toFixed(2));var topPosition=this.selectedOpacity*this.opacityCanvas.height-this.halfSliderSize;this.opacitySliderBut.style.top=topPosition+"px"};ColorPicker.prototype.moveSlCursor=function(saturation,lightness){if(saturation<0){saturation=0}else if(saturation>100){saturation=100}if(lightness<0){lightness=0}else if(lightness>100){lightness=100}this.selectedSaturation=round(saturation);this.selectedLightness=round(lightness);if(this.selectedLightness>20){this.slCursor.style.borderColor="black"}else{this.slCursor.style.borderColor="white"}var leftPosition=this.selectedSaturation*2-this.halfSlCursorSize;var topPosition=(100-this.selectedLightness)*2-this.halfSlCursorSize;this.slCursor.style.left=leftPosition+"px";this.slCursor.style.top=topPosition+"px"};